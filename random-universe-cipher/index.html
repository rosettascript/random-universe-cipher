<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Random Universe Cipher</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/src/ui/styles.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header>
      <h1>ğŸ” Random Universe Cipher</h1>
      <div class="specs">
        <div class="spec"><span class="label">Key:</span><span class="value">512-bit</span></div>
        <div class="spec"><span class="label">Block:</span><span class="value">256-bit</span></div>
        <div class="spec"><span class="label">Rounds:</span><span class="value">24</span></div>
        <div class="spec"><span class="label">AEAD + Argon2</span></div>
      </div>
    </header>

    <!-- Password -->
    <section>
      <h2><span class="icon">ğŸ”‘</span> Password</h2>
      <div style="display: flex; gap: 0.5rem; align-items: flex-end;">
        <div class="input-group" style="flex: 1; margin-bottom: 0;">
          <input type="password" id="password" placeholder="Enter password...">
        </div>
        <button class="btn btn-secondary btn-small" id="generate-key">ğŸ² Random</button>
      </div>
      <div class="security-options">
        <label>
          <input type="checkbox" id="use-aead" checked>
          <span>ğŸ›¡ï¸ AEAD</span>
        </label>
        <label>
          <input type="checkbox" id="use-argon2" checked>
          <span>ğŸ”‘ Argon2</span>
        </label>
        <span id="salt-display" style="color: var(--text-muted);"></span>
      </div>
    </section>

    <!-- Text Encrypt/Decrypt - Side by Side -->
    <div class="encrypt-decrypt-grid">
      <section>
        <h2><span class="icon">ğŸ”’</span> Encrypt</h2>
        <div class="input-group">
          <textarea id="plaintext" placeholder="Enter text to encrypt..."></textarea>
        </div>
        <button class="btn btn-primary" id="encrypt-btn" style="width: 100%;">âš¡ Encrypt</button>
        <div class="output-container">
          <div class="output" id="encrypt-output"></div>
          <button class="copy-btn" id="copy-ciphertext">Copy</button>
        </div>
      </section>

      <section>
        <h2><span class="icon">ğŸ”“</span> Decrypt</h2>
        <div class="input-group">
          <textarea id="ciphertext" placeholder="Paste ciphertext..."></textarea>
        </div>
        <button class="btn btn-primary" id="decrypt-btn" style="width: 100%;">âš¡ Decrypt</button>
        <div class="output-container">
          <div class="output" id="decrypt-output"></div>
          <button class="copy-btn" id="copy-plaintext">Copy</button>
        </div>
      </section>
    </div>

    <!-- File Encryption -->
    <section>
      <h2><span class="icon">ğŸ“</span> File Encryption</h2>
      
      <div id="drop-zone" class="drop-zone">
        <div class="drop-zone-content">
          <div class="drop-icon">ğŸ“‚</div>
          <div class="drop-text">Drop file here or click to select</div>
        </div>
        <input type="file" id="file-input" style="display: none;">
      </div>
      
      <div id="file-info" class="file-info" style="display: none;">
        <div class="file-details">
          <span class="file-icon">ğŸ“„</span>
          <div>
            <div id="file-name" class="file-name">filename.txt</div>
            <div id="file-size" class="file-size">0 KB</div>
          </div>
        </div>
        <button class="btn btn-small" id="clear-file">âœ•</button>
      </div>
      
      <div class="btn-group" style="margin-top: 0.75rem;">
        <button class="btn btn-primary" id="encrypt-file-btn" disabled style="flex: 1;">ğŸ”’ Encrypt</button>
        <button class="btn btn-secondary" id="decrypt-file-btn" disabled style="flex: 1;">ğŸ”“ Decrypt</button>
      </div>
      
      <div id="file-progress" class="file-progress" style="display: none;">
        <div class="progress-bar"><div id="progress-fill" class="progress-fill"></div></div>
        <div id="progress-text" class="progress-text">Processing...</div>
      </div>
      
      <div id="file-output" class="file-output" style="display: none;">
        <div class="file-output-icon">âœ…</div>
        <div id="file-output-text">Success!</div>
        <button class="btn btn-primary btn-small" id="download-file-btn">â¬‡ï¸ Download</button>
      </div>
    </section>

    <!-- Performance -->
    <section>
      <h2><span class="icon">ğŸ“Š</span> Performance</h2>
      <div class="stats">
        <div class="stat-card">
          <div class="label">Key</div>
          <div class="value" id="key-time">-</div>
        </div>
        <div class="stat-card">
          <div class="label">Encrypt</div>
          <div class="value" id="enc-time">-</div>
        </div>
        <div class="stat-card">
          <div class="label">Decrypt</div>
          <div class="value" id="dec-time">-</div>
        </div>
        <div class="stat-card">
          <div class="label">Speed</div>
          <div class="value" id="throughput">-</div>
        </div>
      </div>
    </section>

    <!-- Security Test -->
    <section>
      <h2><span class="icon">ğŸ”¬</span> Security Test</h2>
      <div style="display: flex; gap: 0.5rem; align-items: center;">
        <button class="btn btn-secondary btn-small" id="run-avalanche">ğŸŒŠ Avalanche Test</button>
        <span id="avalanche-results" style="font-size: 0.75rem; color: var(--text-muted);">Click to test bit propagation</span>
      </div>
    </section>

    <!-- About - Collapsible -->
    <section>
      <h2 class="section-toggle" onclick="this.classList.toggle('collapsed'); this.nextElementSibling.classList.toggle('collapsed');">
        <span class="icon">â„¹ï¸</span> About
      </h2>
      <div class="section-content about-content">
        <p><strong>Random Universe Cipher</strong> - 256-bit quantum-resistant symmetric encryption.</p>
        <ul>
          <li>7 Ã— 512-bit state registers with GF(2â¸) operations</li>
          <li>24 rounds with key-derived S-boxes</li>
          <li>SHAKE256 keystream + ChaCha20 PRNG</li>
          <li>AEAD (HMAC-SHA256) + Argon2id KDF</li>
        </ul>
        <p style="color: var(--warning); margin-top: 0.5rem;">âš ï¸ Demo only - not audited for production use.</p>
      </div>
    </section>
  </div>

  <script type="module" src="/src/index.ts"></script>
</body>
</html>
